<!DOCTYPE html>
<html lang="en">





  





  
  
<head>
  <meta charset="utf-8">
  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CV8C3DHP6P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-CV8C3DHP6P');
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-54474000-1', 'auto'); 
    ga('send', 'pageview');
  </script>
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P24TWCG');</script>
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Activate a license  | Fundamentals  | Samsung Knox Documentation</title>
  <meta http-equiv="content-language" content="en">
  <meta name="language" content="en">
  <script src="../../../../assets/js/bundle.js"></script>
  <link rel="stylesheet" href="../../../../styles/main.min.css">
  <link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
  <link rel="icon" sizes="16x16" href="../../../../favicon-16x16.png" type="image/png">
  <link rel="icon" sizes="32x32" href="../../../../favicon-32x32.png" type="image/png">
  <link rel="manifest" href="../../../../manifest.json">
  <link rel="apple-touch-icon" sizes="180x180" href="../../../../apple-touch-icon.png">
  <link rel="mask-icon" href="../../../../safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="white">
</head>
<body id=ZgotmplZ>
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24TWCG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><a id="back-to-top-button" class="button-back-to-top">Back to top</a>
  
    <header>
  <div class="container-xxl border-bottom">
    <nav class="nav-top navbar navbar-expand-lg d-flex px-3">
        <a class="navbar-brand" href="../../../../index.html">
          <img src="../../../../svg/samsung_knox_doc_logo.svg" alt="Logo for Samsung Knox documentation">
        </a>
        <div class="collapse navbar-collapse">
          <ul class="row align-items-center ms-10 mb-0 p-0">
            
            
            <li class="navbar-nav col">
              <a href="../../../../../admin/index.html" class="body-4 text-black fw-light pe-auto me-6 text-decoration-none ">Admin</a>
            </li>
            
            <li class="navbar-nav col">
              <a href="../../../../index.html" class="body-4 text-black fw-light pe-auto me-6 text-decoration-none fw-bold border-bottom border-2 border-black">Developer</a>
            </li>
            
            <li class="navbar-nav col">
              <a href="../../../../../partner/index.html" class="body-4 text-black fw-light pe-auto me-3 text-decoration-none ">Partner</a>
            </li>
            
          </ul>
        </div>
        <div class="ms-auto">
          <div class="collapse navbar-collapse">
            <div class="head-search-wrapper ms-auto ">
              <script async src="https://cse.google.com/cse.js?cx=9119a64f9020430ac"></script>
<div class="gcse-search"></div>

            </div>
          </div>
        </div>
    </nav>
  </div>
</header>

  
  <main>
    
      <div class="container-xxl l-layout">
        <div class="l-sidebar pt-md-6">
          
<aside class="ps-2 pe-4">
  <div class="d-inline-block w-100 position-relative">
  <button id="guide-navigation-button" type="button" data-bs-toggle="collapse" data-bs-target="#guide-navigation" aria-controls="#guide-navigation" aria-expanded="false" class="dropdown-button border border-2">Samsung Knox developer guides</button>
  <div id="guide-navigation" class="collapse w-100 position-absolute dropdown">
    <nav aria-labelledby="guide-navigation-button" class="dropdown-content">
      <ul>
      <li>
  <a href="../../../../fundamentals.html" class="active-drop-item">Fundamentals</a>
  </li>
<li>
  <span>Device apps</span>
  <ul>
    <li>
  <a href="../../../../knox-sdk.html" >Knox SDK</a>
  <ul>
    </ul>
  </li>
<li>
  <a href="../../../../knox-pos-sdk.html" >Knox POS SDK</a>
  </li>
<li>
  <a href="../../../../knox-capture-sdk.html" >Knox Capture SDK</a>
  </li>
<li>
  <a href="../../../../knox-tizen-sdk.html" >Knox Tizen SDK</a>
  </li>
</ul>
  </li>
<li>
  <span>Web services</span>
  <ul>
    <li>
  <a href="../../../../knox-cloud-authentication.html" >Knox cloud services authentication</a>
  </li>
<li>
  <a href="../../../../knox-webhook-notification.html" >Knox Webhook Notification</a>
  <ul>
    </ul>
  </li>
<li>
  <a href="../../../../knox-deployment-program.html" >Knox Deployment Program</a>
  </li>
<li>
  <a href="../../../../knox-msp-portal.html" >Knox MSP Portal</a>
  </li>
<li>
  <a href="../../../../knox-mobile-enrollment.html" >Knox Mobile Enrollment</a>
  </li>
<li>
  <a href="../../../../knox-configure.html" >Knox Configure</a>
  </li>
<li>
  <a href="../../../../knox-manage.html" >Knox Manage</a>
  </li>
<li>
  <a href="../../../../knox-attestation.html" >Knox Attestation</a>
  </li>
<li>
  <a href="../../../../knox-guard.html" >Knox Guard</a>
  <ul>
    </ul>
  </li>
<li>
  <a href="../../../../knox-asset-intelligence.html" >Knox Asset Intelligence</a>
  </li>
</ul>
  </li>
<li>
  <a href="../../../../managed-configurations.html" >Managed configurations</a>
  </li>
</ul>
    </nav>
  </div>
</div><h3 class="body-3 mt-4 ps-2">Fundamentals</h3>
  <nav class="side-nav">
    <ul class="ps-2">
      
      
      <li>
        <div>
          <a class="body-5 text-black fw-light" href="../../../../fundamentals.html">Introduction</a>
        </div>
      </li>
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../developer-tools.html">Developer tools</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    <div class="d-flex justify-content-between cursor-pointer" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-sdk-licenses" aria-expanded="false">
      <span class="body-5 text-black fw-light">SDK licenses</span>
      <a class="btn-toggle d-inline-flex rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-sdk-licenses" aria-expanded="true"></a>
    </div>
      
    <div class="show" id="sub-fundamentals-sdk-licenses-sdk-licenses">
      <ul>
      
      
  
  
    <li class="mt-2">
    
    <div class="d-flex justify-content-between cursor-pointer" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-overview-overview" aria-expanded="false">
      <span class="body-5 text-black fw-light">Overview</span>
      <a class="btn-toggle d-inline-flex rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-overview-overview" aria-expanded="false"></a>
    </div>
      
    <div class="collapse" id="sub-fundamentals-sdk-licenses-overview-overview">
      <ul>
      
      
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../overview/about-licenses.html">About licenses</a>
    </div>
    
    </li>
  
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../overview/license-permissions.html">Licenses permissions</a>
    </div>
    
    </li>
  
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../overview/knox-version-mapping.html">Knox version mapping</a>
    </div>
    
    </li>
  </ul>
    </div></li>
  
  
  
    <li class="mt-2">
    
    <div class="d-flex justify-content-between cursor-pointer" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-tutorial-tutorial" aria-expanded="false">
      <span class="body-5 text-black fw-light">Tutorial</span>
      <a class="btn-toggle d-inline-flex rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#sub-fundamentals-sdk-licenses-tutorial-tutorial" aria-expanded="true"></a>
    </div>
      
    <div class="show" id="sub-fundamentals-sdk-licenses-tutorial-tutorial">
      <ul>
      
      
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../introduction/index.html">Introduction</a>
    </div>
    
    </li>
  
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../get-a-license.html">Get a license</a>
    </div>
    
    </li>
  
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black active" href="../activate-a-license.html">Activate a license</a>
    </div>
    
    </li>
  
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../declare-knox-permissions.html">Declare Knox permissions</a>
    </div>
    
    </li>
  </ul>
    </div></li>
  </ul>
    </div></li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../manage-your-account/index.html">Manage your account</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../enable-two-step-verification/index.html">Enable two-step verification</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../device-apps/index.html">Device apps</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../web-services.html">Web services</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../release-notes.html">Release notes</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../faq/index.html">FAQ</a>
    </div>
    
    </li>
  
        
          
  
  
    <li class="mt-2">
    
    
    <div class="d-flex justify-content-between">
      <a class="body-5 text-black fw-light" href="../../../support.html">Support</a>
    </div>
    
    </li>
  </ul>
  </nav>
</aside></div>
        <div class="l-main pt-md-6">
          
          <div class="l-content-top mb-4">
            <div class="l-breadcrumb">
              <a class="fw-light text-black" href="../../../../index.html">Home</a><span> /</span>
<a class="fw-light text-black" href="../../../../fundamentals.html">Fundamentals</a><span> /</span>
<a class="fw-light text-black" href="../../index.html">SDK licenses</a><span> /</span>
<a class="fw-light text-black" href="../index.html">Tutorial</a><span> /</span>

            </div>
            <div class="mt-4">
              <h1>Activate a license</h1>
            </div>
            

  <p><span>Last updated December  18th, 2023</span></p>


    

</div>
          <div class="l-content">
            

  




      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        
      
      
      
      
        <p>Your app activates your Knox license to authenticate API access. For more information, see <a href="../../overview/about-licenses.html">Knox licenses</a>. The <strong>Any Knox version</strong> tab below describes a common method applicable to all the Knox versions. If your solution covers all the Knox versions, follow the instructions under this tab. However, if your solution is only for devices with Knox 3.8 or higher, follow the instructions under the <strong>Knox 3.8 or higher versions only</strong> tab as that code provides better performance compared to the generic code.</p>
<ul
  class="nav nav-tabs d-flex align-items-center mt-3"
  id="nav-tabs"
  role="tablist"
>
   
   
   
   
   
  
  <li class="nav-item" role="presentation">
    <button
      class="tab-link active px-3 py-2 rounded-5"
      id="bfdcae-tab"
      data-bs-toggle="tab"
      data-bs-target="#bfdcae"
      type="button"
      role="tab"
      aria-controls="bfdcae"
      aria-selected="true"
    >Any Knox version
    </button>
  </li>
   
   
  
  <li class="nav-item" role="presentation">
    <button
      class="tab-link  px-3 py-2 rounded-5"
      id="bdfaec-tab"
      data-bs-toggle="tab"
      data-bs-target="#bdfaec"
      type="button"
      role="tab"
      aria-controls="bdfaec"
      aria-selected="true"
    >Knox 3.8 or higher versions only
    </button>
  </li>
   
   
   
  
</ul>
<div class="tab-content mb-6" id="nav-tab-content">













  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  


<div class="tab-pane fade  show active  border border-grey-line rounded-3 overflow-hidden" id="bfdcae" role="tabpanel" aria-labelledby="bfdcae-tab">
  
  
    
    <div class="tab-toc p-3 border-bottom border-grey-line">
      <p class="fw-bold">On this tab</p>
      <ul class="mt-2 mb-0 list-unstyled section-nav">
      
        
        <li class="ms-0"><a href="../activate-a-license.html#Create-any-knox-version">Create the License Receiver class</a>
      
        
        <li class="ms-0"><a href="../activate-a-license.html#register-the-license-receiver-class-any-knox-version">Register the License Receiver class</a>
      
        
        <li class="ms-0"><a href="../activate-a-license.html#Activate-any-knox-version">Activate the license</a>
      
        
        <li class="ms-0"><a href="../activate-a-license.html#backwards-compatible-key-bck-any-knox-version">Backwards Compatible Key (BCK)</a>
      
      </ul>
  </div>
    
  
  
  <div class="tab-content p-3"><h2 id="Create-any-knox-version">Create the License Receiver class</h2><p>In your app, create a new class called <code>SampleLicenseReceiver.java</code>, which contains a license receiver for your KPE and backwards compatible keys.</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">package</span> <span style="color:#00f;font-weight:bold">com.samsung.knox.example.gettingstarted</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">android.content.BroadcastReceiver</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">android.content.Context</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">android.content.Intent</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">android.util.Log</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">android.widget.Toast</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">com.samsung.android.knox.license.KnoxEnterpriseLicenseManager</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">com.samsung.android.knox.license.EnterpriseLicenseManager</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">public</span> <span style="color:#008000;font-weight:bold">class</span> <span style="color:#00f;font-weight:bold">SampleLicenseReceiver</span> <span style="color:#008000;font-weight:bold">extends</span> BroadcastReceiver <span style="color:#666">{</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">private</span> <span style="color:#008000;font-weight:bold">static</span> <span style="color:#008000;font-weight:bold">final</span> <span style="color:#b00040">int</span> DEFAULT_ERROR_CODE <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">showToast</span><span style="color:#666">(</span>Context context<span style="color:#666">,</span> String msg<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>      Toast<span style="color:#666">.</span><span style="color:#7d9029">makeText</span><span style="color:#666">(</span>context<span style="color:#666">,</span> msg<span style="color:#666">,</span> Toast<span style="color:#666">.</span><span style="color:#7d9029">LENGTH_SHORT</span><span style="color:#666">).</span><span style="color:#7d9029">show</span><span style="color:#666">();</span></span></span><span style="display:flex;"><span>  <span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>  <span style="color:#a2f">@Override</span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">public</span> <span style="color:#b00040">void</span> <span style="color:#00f">onReceive</span><span style="color:#666">(</span>Context context<span style="color:#666">,</span> Intent intent<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>intent <span style="color:#666">==</span> <span style="color:#008000;font-weight:bold">null</span><span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>          <span style="color:#408080;font-style:italic">// No intent action is available</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>          showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">no_intent</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>      <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>          String action <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getAction</span><span style="color:#666">();</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>action <span style="color:#666">==</span> <span style="color:#008000;font-weight:bold">null</span><span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>              <span style="color:#408080;font-style:italic">// No intent action is available</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>              showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">no_intent_action</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>          <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>action<span style="color:#666">.</span><span style="color:#7d9029">equals</span><span style="color:#666">(</span>KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ACTION_LICENSE_STATUS</span><span style="color:#666">))</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>              <span style="color:#408080;font-style:italic">// KPE activation result Intent is obtained</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>              <span style="color:#b00040">int</span> errorCode <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span></span></span><span style="display:flex;"><span>                      KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_ERROR_CODE</span><span style="color:#666">,</span> DEFAULT_ERROR_CODE<span style="color:#666">);</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>errorCode <span style="color:#666">==</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NONE</span><span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>                  <span style="color:#408080;font-style:italic">// KPE activated successfully</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">kpe_activated_succesfully</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>                  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;SampleLicenseReceiver&#34;</span><span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">kpe_activated_succesfully</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>              <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>                  <span style="color:#408080;font-style:italic">// KPE activation failed</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  <span style="color:#408080;font-style:italic">// Display KPE error message</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  String errorMessage <span style="color:#666">=</span> getKPEErrorMessage<span style="color:#666">(</span>context<span style="color:#666">,</span> intent<span style="color:#666">,</span> errorCode<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                  showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> errorMessage<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;SampleLicenseReceiver&#34;</span><span style="color:#666">,</span> errorMessage<span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#666">}</span></span></span><span style="display:flex;"><span>          <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>action<span style="color:#666">.</span><span style="color:#7d9029">equals</span><span style="color:#666">(</span>EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ACTION_LICENSE_STATUS</span><span style="color:#666">))</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>              <span style="color:#408080;font-style:italic">// Backwards compatible key activation result Intent is obtained</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>              <span style="color:#b00040">int</span> errorCode <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span></span></span><span style="display:flex;"><span>              EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_ERROR_CODE</span><span style="color:#666">,</span> DEFAULT_ERROR_CODE<span style="color:#666">);</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>errorCode <span style="color:#666">==</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NONE</span><span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>                  <span style="color:#408080;font-style:italic">// Backwards compatible key activated successfully</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">elm_action_successful</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>                  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;SampleLicenseReceiver&#34;</span><span style="color:#666">,</span> context<span style="color:#666">.</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">elm_action_successful</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span>              <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>                  <span style="color:#408080;font-style:italic">// Backwards compatible key activation failed</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  <span style="color:#408080;font-style:italic">// Display backwards compatible key error message</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>                  String errorMessage <span style="color:#666">=</span> getELMErrorMessage<span style="color:#666">(</span>context<span style="color:#666">,</span> intent<span style="color:#666">,</span> errorCode<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                  showToast<span style="color:#666">(</span>context<span style="color:#666">,</span> errorMessage<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;SampleLicenseReceiver&#34;</span><span style="color:#666">,</span> errorMessage<span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#666">}</span></span></span><span style="display:flex;"><span>          <span style="color:#666">}</span></span></span><span style="display:flex;"><span>      <span style="color:#666">}</span></span></span><span style="display:flex;"><span>  <span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">private</span> String <span style="color:#00f">getELMErrorMessage</span><span style="color:#666">(</span>Context context<span style="color:#666">,</span> Intent intent<span style="color:#666">,</span> <span style="color:#b00040">int</span> errorCode<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>      String message<span style="color:#666">;</span></span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">switch</span> <span style="color:#666">(</span>errorCode<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INTERNAL</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_internal</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INTERNAL_SERVER</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_internal_server</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INVALID_LICENSE</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_licence_invalid_license</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INVALID_PACKAGE_NAME</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_invalid_package_name</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_TERMINATED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_licence_terminated</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NETWORK_DISCONNECTED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_network_disconnected</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NETWORK_GENERAL</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_network_general</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NOT_CURRENT_DATE</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_not_current_date</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NULL_PARAMS</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_null_params</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_SIGNATURE_MISMATCH</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_sig_mismatch</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_UNKNOWN</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_unknown</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_USER_DISAGREES_LICENSE_AGREEMENT</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_user_disagrees_license_agreement</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_VERSION_CODE_MISMATCH</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_ver_code_mismatch</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#a0a000"></span></span></span><span style="display:flex;"><span><span style="color:#a0a000">          default:</span></span></span><span style="display:flex;"><span>              <span style="color:#408080;font-style:italic">// Unknown error code</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>              String errorStatus <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getStringExtra</span><span style="color:#666">(</span></span></span><span style="display:flex;"><span>                      EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_STATUS</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">()</span></span></span><span style="display:flex;"><span>                     <span style="color:#666">.</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_elm_code_unknown</span><span style="color:#666">,</span> Integer<span style="color:#666">.</span><span style="color:#7d9029">toString</span><span style="color:#666">(</span>errorCode<span style="color:#666">),</span> errorStatus<span style="color:#666">);</span></span></span><span style="display:flex;"><span>      <span style="color:#666">}</span></span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">return</span> message<span style="color:#666">;</span></span></span><span style="display:flex;"><span>  <span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">private</span> String <span style="color:#00f">getKPEErrorMessage</span><span style="color:#666">(</span>Context context<span style="color:#666">,</span> Intent intent<span style="color:#666">,</span> <span style="color:#b00040">int</span> errorCode<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>      String message<span style="color:#666">;</span></span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">switch</span> <span style="color:#666">(</span>errorCode<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INTERNAL</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_internal</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INTERNAL_SERVER</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_internal_server</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INVALID_LICENSE</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_licence_invalid_license</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_INVALID_PACKAGE_NAME</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_invalid_package_name</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_TERMINATED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_licence_terminated</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NETWORK_DISCONNECTED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_network_disconnected</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NETWORK_GENERAL</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_network_general</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NOT_CURRENT_DATE</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_not_current_date</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NULL_PARAMS</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_null_params</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_UNKNOWN</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_unknown</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_USER_DISAGREES_LICENSE_AGREEMENT</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_user_disagrees_license_agreement</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_DEACTIVATED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_license_deactivated</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_EXPIRED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_license_expired</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_QUANTITY_EXHAUSTED</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_license_quantity_exhausted</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_ACTIVATION_NOT_FOUND</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_license_activation_not_found</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">case</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_LICENSE_QUANTITY_EXHAUSTED_ON_AUTO_RELEASE</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_license_quantity_exhausted_on_auto_release</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span><span style="color:#a0a000"></span></span></span><span style="display:flex;"><span><span style="color:#a0a000">          default:</span></span></span><span style="display:flex;"><span>              <span style="color:#408080;font-style:italic">// Unknown error code</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>              String errorStatus <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getStringExtra</span><span style="color:#666">(</span></span></span><span style="display:flex;"><span>                      KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_STATUS</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>              message <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#7d9029">getResources</span><span style="color:#666">()</span></span></span><span style="display:flex;"><span>                     <span style="color:#666">.</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">err_kpe_code_unknown</span><span style="color:#666">,</span> Integer<span style="color:#666">.</span><span style="color:#7d9029">toString</span><span style="color:#666">(</span>errorCode<span style="color:#666">),</span> errorStatus<span style="color:#666">);</span></span></span><span style="display:flex;"><span>      <span style="color:#666">}</span></span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">return</span> message<span style="color:#666">;</span></span></span><span style="display:flex;"><span>  <span style="color:#666">}</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span></code></pre></div><p>The <code>KnoxEnterpriseLicenseManager</code> class is used to receive the KPE key, while the <code>EnterpriseLicenseManager</code> class is used to receive the backwards compatible key.</p><h2 id="register-the-license-receiver-class-any-knox-version">Register the License Receiver class</h2><p>When the KPE license is activated, the <code>com.samsung.android.knox.intent.action.KNOX_LICENSE_STATUS</code> intent is emitted. Upon activation of the Backwards Compatible Key, the <code>com.samsung.android.knox.intent.action.LICENSE_STATUS</code> intent is emitted. The app uses the <code>SampleLicenseReceiver</code> class to intercept this intent. Paste this code in <em>AndroidManifest.xml</em> to define the receiver that&rsquo;ll handle Knox license status broadcasts:</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;receiver</span> <span style="color:#7d9029">android:name=</span><span style="color:#ba2121">&#34;.SampleLicenseReceiver&#34;</span> <span style="color:#008000;font-weight:bold">&gt;</span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;intent-filter&gt;</span></span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#7d9029">android:name=</span><span style="color:#ba2121">&#34;com.samsung.android.knox.intent.action.KNOX_LICENSE_STATUS&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span></span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#7d9029">android:name=</span><span style="color:#ba2121">&#34;com.samsung.android.knox.intent.action.LICENSE_STATUS&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span></span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/intent-filter&gt;</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/receiver&gt;</span></span></span></code></pre></div><p>When your app receives the <code>com.samsung.android.knox.intent.action.KNOX_LICENSE_STATUS</code> and the <code>com.samsung.android.knox.intent.action.LICENSE_STATUS</code> intents, it passes the intents to <code>SampleLicenseReceiver.onReceive()</code>. Use this method to have your app respond to the license activation.</p><h2 id="Activate-any-knox-version">Activate the license</h2><p>Use this method in your <strong>MainActivity</strong> to activate the license.</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">activateLicense</span><span style="color:#666">()</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic">// Instantiate the KnoxEnterpriseLicenseManager class to use the activateLicense method</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>  KnoxEnterpriseLicenseManager licenseManager <span style="color:#666">=</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">getInstance</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">this</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic">// License Activation TO DO - Modify Constants.KPE_LICENSE_KEY with license key to be activated</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>  licenseManager<span style="color:#666">.</span><span style="color:#7d9029">activateLicense</span><span style="color:#666">(</span>Constants<span style="color:#666">.</span><span style="color:#7d9029">KPE_LICENSE_KEY</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  mUtils<span style="color:#666">.</span><span style="color:#7d9029">log</span><span style="color:#666">(</span>getResources<span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">license_progress</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">// call backwards compatible key activation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Backwards Compatible Key must be activated after KPE key activation.</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">activateBackwardsCompatibleKey</span><span style="color:#666">()</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic">// Get an instance of the License Manager</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>  EnterpriseLicenseManager backwardsCompatibleKeyManager <span style="color:#666">=</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">getInstance</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">this</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic">// Activate the backwards compatible license key TO DO - Modify Constants.BACKWARDS_COMPATIBLE_KEY with BCK key to be Activated</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>  backwardsCompatibleKeyManager<span style="color:#666">.</span><span style="color:#7d9029">activateLicense</span><span style="color:#666">(</span>Constants<span style="color:#666">.</span><span style="color:#7d9029">BACKWARDS_COMPATIBLE_KEY</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  mUtils<span style="color:#666">.</span><span style="color:#7d9029">log</span><span style="color:#666">(</span>getResources<span style="color:#666">().</span><span style="color:#7d9029">getString</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#7d9029">string</span><span style="color:#666">.</span><span style="color:#7d9029">backwards_compatible_key_activation</span><span style="color:#666">));</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span></code></pre></div><p>When you activate a license, a dialog for consent to use personal information might display. This is shown depending on the policy, and the license is activated only when confirmed. Refer to the <a href="../../../../../admin/knox-platform-for-enterprise/before-you-begin/user-agreements-for-android-device-management/index.html" target="_blank">User agreements for Android device management</a> to find the conditions under which the Knox license privacy policy dialog is displayed.</p><p>For KLM, there are three terms that are important when it comes to licenses that you can receive in the <code>KnoxEnterpriseLicenseManager.ACTION_LICENSE_STATUS</code> broadcast:</p><div class="overflow-auto my-3"><table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody><tr><td>Activation</td><td>Initial license activation (Constant is integer 800)</td></tr><tr><td>Deactivation</td><td>License deactivation (Constant is integer 802)</td></tr><tr><td>Validation</td><td>Once or twice a day, the license agent checks to see if the license is still valid. For example, if it expires before a validation check is made, the license agent returns a value that indicates license expiration. (Constant is integer 801)</td></tr></tbody></table></div><p>The code from the broadcast receiver that catches the license activation is:</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>action<span style="color:#666">.</span><span style="color:#7d9029">equals</span><span style="color:#666">(</span>KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ACTION_LICENSE_STATUS</span><span style="color:#666">))</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>  String status <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getStringExtra</span><span style="color:#666">(</span>KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_STATUS</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#b00040">int</span> errorCode <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span>KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_ERROR_CODE</span><span style="color:#666">,</span> <span style="color:#666">1</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#b00040">int</span> extraResult <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span>KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_RESULT_TYPE</span><span style="color:#666">,</span> <span style="color:#666">1</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  toast<span style="color:#666">.</span><span style="color:#7d9029">setText</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;KLM Status = &#34;</span> <span style="color:#666">+</span> status <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Error Code= &#34;</span> <span style="color:#666">+</span> errorCode <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Extra Result Type= &#34;</span> <span style="color:#666">+</span> extraResult<span style="color:#666">);</span></span></span><span style="display:flex;"><span>  toast<span style="color:#666">.</span><span style="color:#7d9029">show</span><span style="color:#666">();</span></span></span><span style="display:flex;"><span>  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;KLM Status = &#34;</span> <span style="color:#666">+</span> status <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Error Code= &#34;</span> <span style="color:#666">+</span> errorCode <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Extra Result Type= &#34;</span> <span style="color:#666">+</span> extraResult<span style="color:#666">);</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span></code></pre></div><p>For example, if a validation request is made and is successful, the following toast displays:</p><p><code>KLM Status = Success, Error Code = 0, Extra Result Type = 801</code></p><p>For backwards compatible keys, there are two terms that are important when it comes to licenses that you can receive in the <code>EnterpriseLicenseManager.ACTION_LICENSE_STATUS</code> broadcast:</p><div class="overflow-auto my-3"><table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody><tr><td>Activation</td><td>Initial license activation (Constant is integer 800)</td></tr><tr><td>Validation</td><td>Once a week, the license agent checks to see if the license is still valid. For example, if it expires before a validation check is made, the license agent returns a value that indicates license expiration. (Constant is integer 801)</td></tr></tbody></table></div><p>The code from the broadcast receiver that catches the license activation is:</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>action<span style="color:#666">.</span><span style="color:#7d9029">equals</span><span style="color:#666">(</span>EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ACTION_LICENSE_STATUS</span><span style="color:#666">))</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>  String status <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getStringExtra</span><span style="color:#666">(</span>EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_STATUS</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#b00040">int</span> errorCode <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span>EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_ERROR_CODE</span><span style="color:#666">,</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">ERROR_NONE</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  <span style="color:#b00040">int</span> resultType <span style="color:#666">=</span> intent<span style="color:#666">.</span><span style="color:#7d9029">getIntExtra</span><span style="color:#666">(</span>EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">EXTRA_LICENSE_RESULT_TYPE</span><span style="color:#666">,</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">LICENSE_RESULT_TYPE_ACTIVATION</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>  toast<span style="color:#666">.</span><span style="color:#7d9029">setText</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;BCK Status = &#34;</span> <span style="color:#666">+</span> status <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Error Code= &#34;</span> <span style="color:#666">+</span> errorCode <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Result Type= &#34;</span> <span style="color:#666">+</span> resultType<span style="color:#666">);</span></span></span><span style="display:flex;"><span>  toast<span style="color:#666">.</span><span style="color:#7d9029">show</span><span style="color:#666">();</span></span></span><span style="display:flex;"><span>  Log<span style="color:#666">.</span><span style="color:#7d9029">d</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;BCK Status = &#34;</span> <span style="color:#666">+</span> status <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Error Code= &#34;</span> <span style="color:#666">+</span> errorCode <span style="color:#666">+</span> <span style="color:#ba2121">&#34;,  &#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;Result Type= &#34;</span> <span style="color:#666">+</span> resultType<span style="color:#666">);</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span></code></pre></div><p>For example, after a successful activation of a backwards compatible key, the following toast displays:</p><p><code>BCK Status = success, Error Code = 0, Extra Result Type = 800</code></p><h2 id="backwards-compatible-key-bck-any-knox-version">Backwards Compatible Key (BCK)</h2><p>You need to activate a backwards compatible key in the following cases:</p><div class="overflow-auto my-3"><table>    <tr>        <th rowspan="2">KLM Type</th>        <th colspan="2">Backwards compatible key</th>    </tr>    <tr>        <th scope="col">Knox 2.8 or higher</th>        <th scope="col">Knox 2.7.1 or lower</th>    </tr>    <tr>        <td>KPE Standard (KLM09)</td>        <td>BCK not required</td>        <td>BCK required</td>    </tr>    <tr>        <td>Legacy KPE Premium (KLM03, KLM06)</td>        <td>BCK required</td>        <td>BCK required</td>    </tr>    <tr>        <td>KPE Premium (KLM09)</td>        <td>BCK not required</td>        <td>BCK required</td>    </tr></table></div><p><strong>KLM On-Premises</strong></p><p>A backwards compatible key is not required if your:</p><ul><li>device&rsquo;s Knox version is 2.8 or higher</li><li>KLM On-Premises version is 2.3 or higher</li><li>license key was issued in 2020 or later</li></ul><p>For all other cases, a backwards compatible key is required.</p><div class="notice-note"><ul><li><p>If the EMM server activates both the KPE Standard key and the backwards compatible key, it works well for all version devices even IT admin inserts any KPE premium KLM09 key or KLM03. For more information about the backwards compatible key, see <a href="../../../../knox-sdk/faq.html#what-backwards-compatible-key">What is the backwards compatible key?</a>, <a href="../../../../knox-sdk/faq.html#do-i-need-associate-my-app-backwards-compatible-key">Do I need to associate my app with a backwards compatible key?</a>, <a href="../../../../knox-sdk/faq.html#when-do-i-need-use-backwards-compatible-key">When do I need to use the backwards compatible key?</a>, and <a href="../../../../knox-sdk/faq.html#licensing">Licensing</a> from the FAQ.</p></li><li><p>Apps can no longer activate ELM licenses on devices to call Knox APIs. Existing ELM key activated devices will remain activated, even after a factory reset. For more information see <a href="../../../../knox-sdk/faq.html#elm-license-end-of-service">ELM License End of Service</a> from the FAQ.</p></li><li><p>The backwards compatible key must be activated after KPE key activation.</p></li></ul></div><p>See also:</p><ul><li><a href="../../overview/about-licenses.html">About licenses</a></li><li><a href="../get-a-license.html">Get a license</a></li><li><a href="../../../../knox-sdk/features/independent-software-vendors.html">ISV permissions</a></li><li><a href="../../overview/license-permissions.html">License permissions</a></li><li><a href="../declare-knox-permissions.html">Declare permissions</a></li></ul>
  </div>
  
</div>














  
  
  
  
  

  
  
  
  
  

  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
    
    
    
    
    
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  

  
  
  
  
  


<div class="tab-pane fade  border border-grey-line rounded-3 overflow-hidden" id="bdfaec" role="tabpanel" aria-labelledby="bdfaec-tab">
  
  
    
    <div class="tab-toc p-3 border-bottom border-grey-line">
      <p class="fw-bold">On this tab</p>
      <ul class="mt-2 mb-0 list-unstyled section-nav">
      
        
        <li class="ms-0"><a href="../activate-a-license.html#activate-the-license-knox-3-8-or-higher-versions-only">Activate the license</a>
      
        
        <li class="ms-0"><a href="../activate-a-license.html#backwards-compatible-key-bck-knox-3-8-or-higher-versions-only">Backwards Compatible Key (BCK)</a>
      
      </ul>
  </div>
    
  
  
  <div class="tab-content p-3"><p>Until Knox 3.7, the only way to identify if a Knox license was activated or deactivated was through the use of Android Broadcast Receivers. However, due to platform system limitations, this broadcast was time consuming to receive in some situations &mdash; like a phone reboot &mdash; as each broadcast was put in a queue. From Knox SDK 3.8 onwards, a new API was included to activate and deactivate licenses in a faster way. The only difference from the current APIs is the possibility of caller applications to specify a callback that will receive the result as soon as the activation or deactivation is completed.</p><div class="notice-note"><p>In the new APIs using callback, broadcasts with the activation result are no longer sent. However, activation and deactivation APIs are still supported without a callback parameter.</p></div><h2 id="activate-the-license-knox-3-8-or-higher-versions-only">Activate the license</h2><p>Use the following methods in your <code>MainActivity</code> to activate a KPE or BCK license and to deactivate a KPE license:</p><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Use this method in your MainActivity to activate any KPE key.</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">activateKPELicense</span><span style="color:#666">()</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>    Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;activateKPELicense&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Replace showLicenseProgressDialog with your custom loading implementation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    showLicenseProgressDialog<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate the KnoxEnterpriseLicenseManager class to use the activateLicense method</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    KnoxEnterpriseLicenseManager licenseManager <span style="color:#666">=</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">getInstance</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">this</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate LicenseResultCallback to handle activation result</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    LicenseResultCallback kpeActivationResultCallback <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">new</span> LicenseResultCallbackImpl<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Modify Constants.KPE_KEY with license key to be activated</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    licenseManager<span style="color:#666">.</span><span style="color:#7d9029">activateLicense</span><span style="color:#666">(</span>Constants<span style="color:#666">.</span><span style="color:#7d9029">KPE_KEY</span><span style="color:#666">,</span> getPackageName<span style="color:#666">(),</span> kpeActivationResultCallback<span style="color:#666">);</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Use this method in your MainActivity to deactivate any KPE key.</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">deactivateKPELicense</span><span style="color:#666">()</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>    Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;deactivateKPELicense&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Replace showLicenseProgressDialog with your custom loading implementation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    showLicenseProgressDialog<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate the KnoxEnterpriseLicenseManager class to use the deActivateLicense method</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    KnoxEnterpriseLicenseManager licenseManager <span style="color:#666">=</span> KnoxEnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">getInstance</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">this</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate LicenseResultCallback to handle deactivation result</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    LicenseResultCallback kpeDeactivationResultCallback <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">new</span> LicenseResultCallbackImpl<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Modify Constants.KPE_KEY with license key to be deactivated</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    licenseManager<span style="color:#666">.</span><span style="color:#7d9029">deActivateLicense</span><span style="color:#666">(</span>Constants<span style="color:#666">.</span><span style="color:#7d9029">KPE_KEY</span><span style="color:#666">,</span> getPackageName<span style="color:#666">(),</span> kpeDeactivationResultCallback<span style="color:#666">);</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Use this method in your MainActivity to activate a BCK key.</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Backwards Compatible Key must be activated after KPE key activation.</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">activateBackwardsCompatibleKey</span><span style="color:#666">()</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>    Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;activateBackwardsCompatibleKey&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Replace showLicenseProgressDialog with your custom loading implementation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    showLicenseProgressDialog<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate the EnterpriseLicenseManager class to use the activateLicense method</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    EnterpriseLicenseManager licenseManager <span style="color:#666">=</span> EnterpriseLicenseManager<span style="color:#666">.</span><span style="color:#7d9029">getInstance</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">this</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">// Instantiate LicenseResultCallback to handle activation result</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    LicenseResultCallback bckActivationResultCallback <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">new</span> LicenseResultCallbackImpl<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Modify Constants.BACKWARDS_COMPATIBLE_KEY with BCK key to be Activated</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    licenseManager<span style="color:#666">.</span><span style="color:#7d9029">activateLicense</span><span style="color:#666">(</span>Constants<span style="color:#666">.</span><span style="color:#7d9029">BACKWARDS_COMPATIBLE_KEY</span><span style="color:#666">,</span> getPackageName<span style="color:#666">(),</span> bckActivationResultCallback<span style="color:#666">);</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">//Following inner class receives the callback from KPE/BCK activation and KPE deactivation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#008000;font-weight:bold">class</span> <span style="color:#00f;font-weight:bold">LicenseResultCallbackImpl</span> <span style="color:#008000;font-weight:bold">implements</span> LicenseResultCallback <span style="color:#666">{</span></span></span><span style="display:flex;"><span>    <span style="color:#a2f">@Override</span></span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">public</span> <span style="color:#b00040">void</span> <span style="color:#00f">onLicenseResult</span><span style="color:#666">(</span>LicenseResult licenseResult<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">switch</span> <span style="color:#666">(</span>licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getType</span><span style="color:#666">())</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">case</span> ELM_ACTIVATION<span style="color:#666">:</span></span></span><span style="display:flex;"><span>                Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;BCK activation result&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>                handleLicenseCallbackResponse<span style="color:#666">(</span>licenseResult<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">case</span> KLM_ACTIVATION<span style="color:#666">:</span></span></span><span style="display:flex;"><span>                Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;KPE Activation result&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>                handleLicenseCallbackResponse<span style="color:#666">(</span>licenseResult<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">case</span> KLM_DEACTIVATION<span style="color:#666">:</span></span></span><span style="display:flex;"><span>                Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;KPE Deactivation result&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>                handleLicenseCallbackResponse<span style="color:#666">(</span>licenseResult<span style="color:#666">);</span></span></span><span style="display:flex;"><span>                <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">case</span> UNDEFINED<span style="color:#666">:</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">default</span><span style="color:#666">:</span></span></span><span style="display:flex;"><span>                Log<span style="color:#666">.</span><span style="color:#7d9029">e</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;Unknown error during &#34;</span> <span style="color:#666">+</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getType</span><span style="color:#666">());</span></span></span><span style="display:flex;"><span>                <span style="color:#008000;font-weight:bold">break</span><span style="color:#666">;</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span>        <span style="color:#666">}</span></span></span><span style="display:flex;"><span>    <span style="color:#666">}</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span><span style="display:flex;"><span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">/**</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"> * This method will not be called from main thread so if you need to update the UI, be sure to use the appropriate component like Handler or Activity::runOnUiThread()</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">*/</span></span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">private</span> <span style="color:#b00040">void</span> <span style="color:#00f">handleLicenseCallbackResponse</span><span style="color:#666">(</span>LicenseResult licenseResult<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>    Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;handleLicenseCallbackResponse&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">//TODO - Replace dismissLicenseProgressDialog with your custom loading implementation</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>    dismissLicenseProgressDialog<span style="color:#666">();</span></span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>licenseResult<span style="color:#666">.</span><span style="color:#7d9029">isSuccess</span><span style="color:#666">())</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">(</span>licenseResult<span style="color:#666">.</span><span style="color:#7d9029">isActivation</span><span style="color:#666">())</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>            <span style="color:#408080;font-style:italic">//TODO - Modify following code to handle KPE/BCK activation case</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>            Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getLicenseKey</span><span style="color:#666">()</span> <span style="color:#666">+</span></span></span><span style="display:flex;"><span>                    <span style="color:#ba2121">&#34; activated successfully&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>            <span style="color:#408080;font-style:italic">//permissions granted can be check using following code</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>            List permissionsGranted <span style="color:#666">=</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getGrantedPermissions</span><span style="color:#666">();</span></span></span><span style="display:flex;"><span>            <span style="color:#008000;font-weight:bold">for</span> <span style="color:#666">(</span>String permission <span style="color:#666">:</span> permissionsGranted<span style="color:#666">)</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>                Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> permission<span style="color:#666">);</span></span></span><span style="display:flex;"><span>            <span style="color:#666">}</span></span></span><span style="display:flex;"><span>        <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>            <span style="color:#408080;font-style:italic">//TODO - Modify following code to handle KPE deactivation case</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>            Log<span style="color:#666">.</span><span style="color:#7d9029">i</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getLicenseKey</span><span style="color:#666">()</span> <span style="color:#666">+</span></span></span><span style="display:flex;"><span>                    <span style="color:#ba2121">&#34; deactivated successfully&#34;</span><span style="color:#666">);</span></span></span><span style="display:flex;"><span>        <span style="color:#666">}</span></span></span><span style="display:flex;"><span>    <span style="color:#666">}</span> <span style="color:#008000;font-weight:bold">else</span> <span style="color:#666">{</span></span></span><span style="display:flex;"><span>        <span style="color:#408080;font-style:italic">//TODO - Modify following code to handle error during activation/deactivation flow</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>        Log<span style="color:#666">.</span><span style="color:#7d9029">e</span><span style="color:#666">(</span>TAG<span style="color:#666">,</span> <span style="color:#ba2121">&#34;Error during &#34;</span> <span style="color:#666">+</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getType</span><span style="color:#666">()</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34; of license key &#34;</span> <span style="color:#666">+</span></span></span><span style="display:flex;"><span>                licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getLicenseKey</span><span style="color:#666">()</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34; with error code: &#34;</span> <span style="color:#666">+</span> licenseResult<span style="color:#666">.</span><span style="color:#7d9029">getErrorCode</span><span style="color:#666">());</span></span></span><span style="display:flex;"><span>    <span style="color:#666">}</span></span></span><span style="display:flex;"><span><span style="color:#666">}</span></span></span></code></pre></div><p>When you activate a license, a dialog for consent to use personal information might display. This is shown depending on the policy, and the license is activated only when confirmed. Refer to the <a href="../../../../../admin/knox-platform-for-enterprise/before-you-begin/user-agreements-for-android-device-management/index.html" target="_blank">User agreements for Android device management</a> to find the conditions under which the Knox license privacy policy dialog is displayed.</p><h2 id="backwards-compatible-key-bck-knox-3-8-or-higher-versions-only">Backwards Compatible Key (BCK)</h2><p>You need to activate a backwards compatible key in the following cases:</p><div class="overflow-auto my-3"><table>    <tr>        <th rowspan="2">KLM Type</th>        <th colspan="2">Backwards compatible key</th>    </tr>    <tr>        <th scope="col">Knox 2.8 or higher</th>        <th scope="col">Knox 2.7.1 or lower</th>    </tr>    <tr>        <td>KPE Standard (KLM09)</td>        <td>BCK not required</td>        <td>BCK required</td>    </tr>    <tr>        <td>Legacy KPE Premium (KLM03, KLM06)</td>        <td>BCK required</td>        <td>BCK required</td>    </tr>    <tr>        <td>KPE Premium (KLM09)</td>        <td>BCK not required</td>        <td>BCK required</td>    </tr></table></div><p><strong>KLM On-Premises</strong></p><p>A backwards compatible key is not required if your:</p><ul><li>device&rsquo;s Knox version is 2.8 or higher</li><li>KLM On-Premises version is 2.3 or higher</li><li>license key was issued in 2020 or later</li></ul><p>For all other cases, a backwards compatible key is required.</p><div class="notice-note"><ul><li><p>If the EMM server activates both the KPE Standard key and the backwards compatible key, it works well for all version devices even IT admin inserts any KPE premium KLM09 key or KLM03. For more information about the backwards compatible key, see <a href="../../../../knox-sdk/faq.html#what-backwards-compatible-key">What is the backwards compatible key?</a>, <a href="../../../../knox-sdk/faq.html#do-i-need-associate-my-app-backwards-compatible-key">Do I need to associate my app with a backwards compatible key?</a>, <a href="../../../../knox-sdk/faq.html#when-do-i-need-use-backwards-compatible-key">When do I need to use the backwards compatible key?</a>, and <a href="../../../../knox-sdk/faq.html#licensing">Licensing</a> from the FAQ.</p></li><li><p>Apps can no longer activate ELM licenses on devices to call Knox APIs. Existing ELM key activated devices will remain activated, even after a factory reset. For more information see <a href="../../../../knox-sdk/faq.html#elm-license-end-of-service">ELM License End of Service</a> from the FAQ.</p></li><li><p>The backwards compatible key must be activated after KPE key activation.</p></li></ul></div><p>See also:</p><ul><li><a href="../../overview/about-licenses.html">About licenses</a></li><li><a href="../get-a-license.html">Get a license</a></li><li><a href="../../../../knox-sdk/features/independent-software-vendors.html">ISV permissions</a></li><li><a href="../../overview/license-permissions.html">License permissions</a></li><li><a href="../declare-knox-permissions.html">Declare permissions</a></li></ul>
  </div>
  
</div>
</div>

            
          </div>
          <div class="l-toh">
            
          </div>
        </div> 
      </div><div>
  <div id="feedbackQuestion" class="py-4 border-top text-center">
    <p class="body-4 mb-2">Is this page helpful?</p>
    <button id="feedbackYes" class="button-icon me-4">
      <span class="button-thumbs-up pe-4"></span> YES
    </button>
    <button id="feedbackNo" class="button-icon">
      <span class="button-thumbs-down pe-4"></span> No
    </button>
  </div>
</div>

<div id="feedbackThanks" class="mt-6 border-top text-center" style="display: none">
  <p class="body-4 pt-4">Thank you for your feedback!</p>
</div>



    
  </main>
  
    <footer class="border-top">
  
  <div class="container footer">
    <div class="row g-0 footer-top-section">
      
      <div class="col-sm-12 col-md-6 col-lg-3 footer-vertical-section">
        <div class="d-flex justify-content-between align-items-center">
          <a class="footer-section-title" data-bs-toggle="collapse" href="../activate-a-license.html#item0" role="button" aria-expanded="false" aria-controls="item0"> 
            <h6 class="body-3 fw-bold text-uppercase text-black pt-4">Knox Developer documentation</h6>
          </a>
          <a class="btn-toggle d-inline-flex d-lg-none rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#item0" aria-expanded="false"></a>
        </div>
        <div class="d-lg-block collapse" id="item0">
          <ul class="nav flex-column">
            
            <li>
              <a
                href="../../../../fundamentals.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Fundamentals</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-sdk.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox SDK</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-pos-sdk.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox POS SDK</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-capture-sdk.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Capture SDK</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-tizen-sdk.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Tizen SDK</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-cloud-authentication.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Cloud Authentication</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-webhook-notification.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Webhook Notification</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-deployment-program.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Deployment Program</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-msp-portal.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox MSP Portal</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-mobile-enrollment.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Mobile Enrollment</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-configure.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Configure</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-manage.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Manage</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-attestation.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Attestation</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-guard.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Guard</a
              >
            </li>
            
            <li>
              <a
                href="../../../../knox-asset-intelligence.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Knox Asset Intelligence</a
              >
            </li>
            
            <li>
              <a
                href="../../../../managed-configurations.html"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Managed configurations</a
              >
            </li>
            
          </ul>
        </div>
      </div>
      
      <div class="col-sm-12 col-md-6 col-lg-3 footer-vertical-section">
        <div class="d-flex justify-content-between align-items-center">
          <a class="footer-section-title" data-bs-toggle="collapse" href="../activate-a-license.html#item1" role="button" aria-expanded="false" aria-controls="item1"> 
            <h6 class="body-3 fw-bold text-uppercase text-black pt-4">Support</h6>
          </a>
          <a class="btn-toggle d-inline-flex d-lg-none rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#item1" aria-expanded="false"></a>
        </div>
        <div class="d-lg-block collapse" id="item1">
          <ul class="nav flex-column">
            
            <li>
              <a
                href="https://developer.samsungknox.com/dashboard/support"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Submit a support ticket</a
              >
            </li>
            
          </ul>
        </div>
      </div>
      
      <div class="col-sm-12 col-md-6 col-lg-3 footer-vertical-section">
        <div class="d-flex justify-content-between align-items-center">
          <a class="footer-section-title" data-bs-toggle="collapse" href="../activate-a-license.html#item2" role="button" aria-expanded="false" aria-controls="item2"> 
            <h6 class="body-3 fw-bold text-uppercase text-black pt-4">Samsung</h6>
          </a>
          <a class="btn-toggle d-inline-flex d-lg-none rounded border-0 fw-light" data-bs-toggle="collapse" data-bs-target="#item2" aria-expanded="false"></a>
        </div>
        <div class="d-lg-block collapse" id="item2">
          <ul class="nav flex-column">
            
            <li>
              <a
                href="https://www.samsungknox.com/en"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Samsung Knox</a
              >
            </li>
            
            <li>
              <a
                href="https://partner.samsungknox.com/"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Samsung Knox Partner Program</a
              >
            </li>
            
            <li>
              <a
                href="https://developer.samsung.com/"
                class="body-5 d-flex align-items-center text-black fw-light pe-auto text-decoration-none"
                >Samsung Knox Developer</a
              >
            </li>
            
          </ul>
        </div>
      </div>
      
    </div>
  </div>
  <div class="container py-4 border-bottom border-top">
    <p class="m-0"><small>Copyright © 1995-<script>document.write(new Date().getFullYear());</script><noscript>2023</noscript> SAMSUNG All Rights Reserved.</small></p>
  </div>
  <div class="container">
    <div class="footer-bottom-section-row">
      <div class="d-flex py-4 justify-content-between">
        <div class="d-flex align-items-center">
          
          <p class="m-0 footer-bottom-section-item">
            <a class="body-6 text-uppercase text-black" href="https://www2.samsungknox.com/en/privacy-policy-us">Privacy policy</a>
          </p>
          
          <p class="m-0 footer-bottom-section-item">
            <a class="body-6 text-uppercase text-black" href="https://www.samsungknox.com/en/legal">Legal</a>
          </p>
          
        </div>
      </div>
    </div>
  </div>
</footer>

  
</body>

</html>
